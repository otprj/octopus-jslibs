!function(t,e){if("function"==typeof define&&define.amd)define([],e);else if("undefined"!=typeof exports)e();else{var n={exports:{}};e(),t.Parallax=n.exports}}(this,function(){"use strict";define(["hance","jquery"],function(t,e){function n(t,e){t.tween.seek(e),t.playhead=e}function a(t){return Math.min(1,Math.max(0,t))}var r=t.inherit(function(){}),i=r.prototype;return i.init=function(t){this._items=[],this.TweenLib=t},i.add=function(t,n){var a=n.stones,r=n.spot||0,i=[],s=[],o=r,h=r;a.sort(function(t,e){return t.ratio-e.ratio});for(var l=0,f=a.length;l<f;l++){var u=a[l],v=0===l?null:a[l-1],d=l===f-1?null:a[l+1];void 0===u.vars&&(u.vars={}),u.vars.paused=!0,void 0===u.vars.ease&&(u.vars.ease=Linear.easeNone);var p={tween:new this.TweenLib(t,1,u.vars)};u.ratio>r?(p.start=null==v||v.ratio<r?r:v.ratio,p.end=u.ratio,s.push(p)):(p.start=null==d||d.ratio>r?r:d.ratio,p.end=u.ratio,i.push(p)),u.ratio<o&&(o=u.ratio),u.ratio>h&&(h=u.ratio)}i.sort(function(t,e){return e.start-t.start}),s.sort(function(t,e){return t.start-e.start}),this._items.push(e.extend({},n,{element:t,prevRanges:i,nextRanges:s,spot:r,min:o,max:h}))},i.get=function(t){for(var e=0,n=this._items.length;e<n;e++){var a=this._items[e];if(a.element===t)return a}return null},i.getRatio=function(){return this._playhead},i.seek=function(t,e){if(t!==this._playhead||e){for(var r=0,i=this._items.length;r<i;r++){var s=this._items[r],o=s.spot,h=s.prevRanges,l=s.nextRanges;if(t>o){for(var f=h.length-1;f>=0;f--){var u=h[f];void 0!==u.playhead&&0!==u.playhead&&n(u,0)}for(var f=0,v=l.length;f<v;f++){var u=l[f];u.start<=t&&(u.end<=t?1!==u.playhead&&n(u,1):n(u,a((t-u.start)/(u.end-u.start))))}}else{for(var f=l.length-1;f>=0;f--){var u=l[f];void 0!==u.playhead&&0!==u.playhead&&n(u,0)}for(var f=0,v=h.length;f<v;f++){var u=h[f];u.start>=t&&(u.end>=t?1!==u.playhead&&n(u,1):n(u,a((t-u.start)/(u.end-u.start))))}}}this._playhead=a(t)}},i.remove=function(t){var e=this._items.indexOf(t);e>=0&&this._instances.splice(e,1)},i.destroy=function(){for(var t=0,e=this._items.length;t<e;t++){for(var n=this._items[t],a=0,r=n.prevRanges.length;a<r;a++)n.prevRanges[a].tween.kill();for(var i=0,s=n.nextRanges.length;i<s;i++)n.nextRanges[i].tween.kill()}delete this._items},r})});