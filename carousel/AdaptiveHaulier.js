"use strict";!function(t,e){if("function"==typeof define&&define.amd)define([],e);else if("undefined"!=typeof exports)e();else{var n={exports:{}};e(),t.AdaptiveHaulier=n.exports}}(this,function(){!function(){function t(t,e){var n=t.inherit("octopus.carousel.AdaptiveHaulier",function(){}),i=n.prototype;return n.options={tweenDuration:.8,tweenEase:Cubic.easeInOut,parkEase:Cubic.easeInOut,afterDragEase:Linear.easeNone},t.properties(i,[{name:"actualIndex",getter:!0,setter:!1},{name:"currentIndex",getter:!0,setter:!1}]),i.serve=function(t){var i=(this.$node=t.$node,this);this.options=e.extend({},n.options,t.options);this._carousel=t,this._animating=!1,this.$viewport=this.$node.find(".otp-viewport"),"absolute"!==this.$viewport.css("position")&&this.$viewport.css({position:"relative"}),this.$overview=this.$viewport.find(".otp-overview"),"absolute"!==this.$overview.css("position")&&this.$overview.css({position:"absolute"}),this.$contents=this.$node.find(".otp-content"),"absolute"!==this.$contents.css("position")&&this.$contents.css({position:"absolute"}),this._disabledContents=[],this._actualIndex=0,this.$contents.each(function(t){i._disabledContents.push(this),e(this).data("otp-index",t).css({visibility:"hidden"})}),this._tweenedObj={index:0},this._tween=null,this._tweenEnded=!0,this.layout()},i.startDrag=function(t,e){this._dragging=!0,this.cancelTween(),this._carousel.pauseAutoRun(),this._dragStartIndex=this._actualIndex},i.drag=function(t,e){var n=this.$viewport.width(),i=this._dragStartIndex-t/n;this._carousel.options.enableLoop||(i=Math.max(-.3,Math.min(i,this._carousel.getContentCount()-.7))),this.tweenTo(i,0)},i.cancelDrag=function(){if(this._dragStartIndex%1!==0){var t=Math.round(this._dragStartIndex);this.setCurrentIndex(t,!0,t>this._dragStartIndex?1:-1)}this._dragging=!1,this._carousel.resumeAutoRun()},i.stopDrag=function(){this._dragging=!1},i.setCurrentIndex=function(t,e,n,i){var s=this._carousel.getContentCount();if(0===n){var o=(t%s+s)%s,a=(this._actualIndex%s+s)%s;t=a>o&&a-o>s/2?this._actualIndex+s-(a-o):o>a&&o-a>s/2?this._actualIndex-s+(o-a):(t%s+s)%s+Math.floor(this._actualIndex/s)*s}else t=(t%s+s)%s+Math.floor(this._actualIndex/s)*s,n>0&&t<this._actualIndex?t+=s:0>n&&t>this._actualIndex&&(t-=s);if(e===!1)this.tweenTo(t,0);else{var r=i?this.options.afterDragEase:this.options.tweenEase;this.tweenTo(t,void 0,r)}},i.getActualIndex=function(){var t=this._carousel.getContentCount(),e=(this._actualIndex%t+t)%t;return isNaN(e)?0:e},i.tweenTo=function(t,n,i){this.cancelTween();var s=this._carousel.getContentCount(),o=this.$viewport.width(),a=this;void 0===n&&(n=this.getTweenDuration((this._actualIndex-t)*o)),void 0===i&&(i=Linear.easeNone),this._animating=!0,this._carousel.pauseAutoRun(),this._tween=TweenLite.to(this._tweenedObj,n,{index:t,ease:i,onUpdate:function(){a._actualIndex=a._tweenedObj.index;var t=(a._actualIndex%s+s)%s,n=a.$contents.eq(Math.floor(t)),i=a.$contents.eq((Math.floor(t)+1)%s);a.setContentStyles(n,{x:Math.floor((Math.floor(t)-t)*o),visibility:"visible"}),a.setContentStyles(i,{x:Math.floor((Math.floor(t)-t+1)*o),visibility:"visible"}),a._carousel.options.enableLoop||(a._actualIndex>s-1&&i.css({visibility:"hidden"}),a._actualIndex<0&&n.css({visibility:"hidden"}));for(var r=0,h=a.$contents.length;h>r;r++){var u=a.$contents[r],d=a._disabledContents.indexOf(u),c=d>=0;u!==n[0]&&u!==i[0]?c||(a._disabledContents.push(u),a.setContentStyles(e(u),{x:o,visibility:"hidden"})):c&&a._disabledContents.splice(d,1)}e(a._carousel).trigger("progress",{actualIndex:a._actualIndex})},onComplete:function(){a._animating=!1,a._carousel.resumeAutoRun()}})},i.setContentStyles=function(t,e){var n=e.x||0,i=e.y||0;e.x=e.y=void 0,e.left=n,e.top=i,t.css(e)},i.cancelTween=function(){this._tween&&this._tween.progress()<1&&this._tween.kill(),this._tween=null,this._animating=!1},i.isAnimating=function(){return this._animating},i.getIndex=function(t){var e=this._carousel.getContentCount(),n=this.$viewport.width(),i=e*n,t=(this._offset.x%i+i)%i,s=Math.ceil(t/n);return s},i.getTweenDuration=function(t){var e=this.options.tweenDuration;return"function"==typeof e?e=e(t):this.$viewport.width()>0&&(e=Math.max(.3,Math.min(Math.abs(t)/this.$viewport.width()*e,1.5*e))),0>=e&&(e=this.options.tweenDuration),e},i.layout=function(){this._tween&&this._tween.kill(),void 0!==this._carousel.getCurrentIndex()&&this.setCurrentIndex(this._carousel.getCurrentIndex(),!1,1)},n}t(hance,$)}()});