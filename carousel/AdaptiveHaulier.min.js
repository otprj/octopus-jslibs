!function(t,e){if("function"==typeof define&&define.amd)define([],e);else if("undefined"!=typeof exports)e();else{var i={exports:{}};e(),t.AdaptiveHaulier=i.exports}}(this,function(){"use strict";!function(){function t(t,e){var i=t.inherit("octopus.carousel.AdaptiveHaulier",function(){}),n=i.prototype;return i.options={tweenDuration:.8,tweenEase:Cubic.easeInOut,parkEase:Cubic.easeInOut,afterDragEase:Linear.easeNone},t.properties(n,[{name:"actualIndex",getter:!0,setter:!1},{name:"currentIndex",getter:!0,setter:!1}]),n.serve=function(t){var n=(this.$node=t.$node,this);this.options=e.extend({},i.options,t.options);this._carousel=t,this._animating=!1,this.$viewport=this.$node.find(".otp-viewport"),"absolute"!==this.$viewport.css("position")&&this.$viewport.css({position:"relative"}),this.$overview=this.$viewport.find(".otp-overview"),"absolute"!==this.$overview.css("position")&&this.$overview.css({position:"absolute"}),this.$sheets=this.$node.find(".otp-sheet"),"absolute"!==this.$sheets.css("position")&&this.$sheets.css({position:"absolute"}),this._disabledContents=[],this._actualIndex=0,this.$sheets.each(function(t){n._disabledContents.push(this),e(this).data("otp-index",t).css({visibility:"hidden"})}),this._tweenedObj={index:0},this._tween=null,this._tweenEnded=!0,this.layout()},n.startDrag=function(t,e){this._dragging=!0,this.cancelTween(),this._carousel.pauseAutoRun(),this._dragStartIndex=this._actualIndex},n.drag=function(t,e){var i=this.$viewport.width(),n=this._dragStartIndex-t/i;this._carousel.options.enableLoop||(n=Math.max(-.3,Math.min(n,this._carousel.getContentCount()-.7))),this.tweenTo(n,0)},n.cancelDrag=function(){if(this._dragStartIndex%1!==0){var t=Math.round(this._dragStartIndex);this.setCurrentIndex(t,!0,t>this._dragStartIndex?1:-1)}this._dragging=!1,this._carousel.resumeAutoRun()},n.stopDrag=function(){this._dragging=!1},n.setCurrentIndex=function(t,e,i,n){var s=this._carousel.getContentCount();if(0===i){var o=(t%s+s)%s,a=(this._actualIndex%s+s)%s;t=a>o&&a-o>s/2?this._actualIndex+s-(a-o):o>a&&o-a>s/2?this._actualIndex-s+(o-a):(t%s+s)%s+Math.floor(this._actualIndex/s)*s}else t=(t%s+s)%s+Math.floor(this._actualIndex/s)*s,i>0&&t<this._actualIndex?t+=s:0>i&&t>this._actualIndex&&(t-=s);if(e===!1)this.tweenTo(t,0);else{var r=n?this.options.afterDragEase:this.options.tweenEase;this.tweenTo(t,void 0,r)}},n.getActualIndex=function(){var t=this._carousel.getContentCount(),e=(this._actualIndex%t+t)%t;return isNaN(e)?0:e},n.tweenTo=function(t,i,n){this.cancelTween();var s=this._carousel.getContentCount(),o=this.$viewport.width(),a=this;void 0===i&&(i=this.getTweenDuration((this._actualIndex-t)*o)),void 0===n&&(n=Linear.easeNone),this._animating=!0,this._carousel.pauseAutoRun(),this._tween=TweenLite.to(this._tweenedObj,i,{index:t,ease:n,onUpdate:function(){a._actualIndex=a._tweenedObj.index;var t=(a._actualIndex%s+s)%s,i=a.$sheets.eq(Math.floor(t)),n=a.$sheets.eq((Math.floor(t)+1)%s);a.setContentStyles(i,{x:Math.floor((Math.floor(t)-t)*o),visibility:"visible"}),a.setContentStyles(n,{x:Math.floor((Math.floor(t)-t+1)*o),visibility:"visible"}),a._carousel.options.enableLoop||(a._actualIndex>s-1&&n.css({visibility:"hidden"}),a._actualIndex<0&&i.css({visibility:"hidden"}));for(var r=0,h=a.$sheets.length;h>r;r++){var u=a.$sheets[r],d=a._disabledContents.indexOf(u),l=d>=0;u!==i[0]&&u!==n[0]?l||(a._disabledContents.push(u),a.setContentStyles(e(u),{x:o,visibility:"hidden"})):l&&a._disabledContents.splice(d,1)}e(a._carousel).trigger("progress",{actualIndex:a._actualIndex})},onComplete:function(){a._animating=!1,a._carousel.resumeAutoRun()}})},n.setContentStyles=function(t,e){var i=e.x||0,n=e.y||0;e.x=e.y=void 0,e.left=i,e.top=n,t.css(e)},n.cancelTween=function(){this._tween&&this._tween.progress()<1&&this._tween.kill(),this._tween=null,this._animating=!1},n.isAnimating=function(){return this._animating},n.getIndex=function(t){var e=this._carousel.getContentCount(),i=this.$viewport.width(),n=e*i,t=(this._offset.x%n+n)%n,s=Math.ceil(t/i);return s},n.getTweenDuration=function(t){var e=this.options.tweenDuration;return"function"==typeof e?e=e(t):this.$viewport.width()>0&&(e=Math.max(.3,Math.min(Math.abs(t)/this.$viewport.width()*e,1.5*e))),0>=e&&(e=this.options.tweenDuration),e},n.layout=function(){this._tween&&this._tween.kill(),void 0!==this._carousel.getCurrentIndex()&&this.setCurrentIndex(this._carousel.getCurrentIndex(),!1,1)},i}t(hance,$)}()});